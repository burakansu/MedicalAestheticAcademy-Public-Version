@model PracticeLesson

<style>
    .navi {
        padding: 0;
        margin: 0;
        display: block;
        list-style: none;
    }

        .navi .navi-item {
            padding: 0;
            display: block;
            list-style: none;
        }


            .navi .navi-item .navi-link {
                display: -webkit-box;
                display: -ms-flexbox;
                display: flex;
                -webkit-box-align: center;
                -ms-flex-align: center;
                align-items: center;
                padding: 0.75rem 1.5rem;
            }

        .navi.navi-link-rounded .navi-item .navi-link {
            border-radius: 0.42rem;
            color: #c5c5d8;
        }

        .navi.navi-active .navi-item .navi-link.active {
            background-color: #009ef7;
        }

        .navi.navi .navi-item .navi-link {
            background-color: #F3F6F9;
        }

        .navi .navi-item .navi-link .navi-icon {
            -webkit-box-flex: 0;
            -ms-flex: 0 0 2rem;
            flex: 0 0 2rem;
        }
</style>
<div class="subheader py-2 py-lg-6 subheader-solid" id="kt_subheader" style="background-color:white;">
    <div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
        <!--begin::Info-->
        <div class="d-flex align-items-center flex-wrap mr-1">
            <!--begin::Mobile Toggle-->
            <button class="burger-icon burger-icon-left mr-4 d-inline-block d-lg-none" id="kt_subheader_mobile_toggle">
                <span></span>
            </button>
            <!--end::Mobile Toggle-->
            <!--begin::Page Heading-->
            <div class="d-flex align-items-baseline flex-wrap mx-10">
                <!--begin::Page Title-->
                <h5 class="text-dark font-weight-bold my-1 mx-10">@Model.Name  </h5>
                <!--end::Page Title-->
                <!--begin::Breadcrumb-->
                <ul class="breadcrumb breadcrumb-transparent breadcrumb-dot font-weight-bold p-0 my-2 font-size-sm">

                    <li class="breadcrumb-item">
                        <a  class="text-muted">Pratik Ders</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="#" class="text-muted">Galeri</a>
                    </li>

                </ul>
                <!--end::Breadcrumb-->
            </div>
            <!--end::Page Heading-->
        </div>
        <!--end::Info-->

    </div>
</div>

<div class="m-10">


    <div class="row">

        <div class="col-sm-2 card align-items-center">

            <div class=" p-1 card-body menu menu-rounded menu-column menu-title-gray-700 menu-icon-gray-400 menu-arrow-gray-400 menu-bullet-gray-400 menu-arrow-gray-400 menu-state-bg fw-semibold w-200px" data-kt-menu="true">
                <h5 class="text-dark font-weight-bold my-5">@Model.Name Galeri</h5>

                <!--begin::Nav-->
                <div class="navi navi-bold navi-hover navi-active navi-link-rounded" id="navi">
                    <input type="hidden" id="PracticeLessonId" value="@Model.PracticeLessonId" />
                    <div class="navi-item mb-2 mt-2">
                        <a id="firstttt" href="#"
                           id="@Model.PracticeLessonId"
                           displayType="list"
                           form="/PracticeLessonGallery/GetImages/@Model.PracticeLessonId"
                           filterForm=""
                           triggerEvent="PracticeLessonImageFormPopup"
                           params='{"id":"0","PracticeLessonId":"@Model.PracticeLessonId"}'
                           triggerText="Ekle"
                           btnId="0"
                           coloumns=""
                           cardLTitle="@Model.Name Detay"
                           cardDescription=""
                           class="navi-link py-4">

                            <span class="navi-icon mr-2">
                                <span class="svg-icon">
                                    <i class="fa-solid fa-chalkboard-user"></i>
                                </span>
                            </span>
                            <span class="navi-text font-size-lg">Galeri</span>
                        </a>
                    </div>
                </div>
                <!--end::Nav-->



            </div>
        </div>

        <div class="col-sm-10 ">
            <!--begin::Content-->
            <div class="flex-row-fluid ml-lg-8">
                <div class="card card-custom card-stretch">
                    <!--begin::Header-->
                    <div class="card-header py-3">
                        <div class="card-title align-items-start flex-column">
                            <h3 id="cardTitle" class="card-label font-weight-bolder text-dark"></h3>
                            <span id="cardDescription" class="text-muted font-weight-bold font-size-sm mt-1"></span>
                        </div>
                        <div class="card-toolbar">
                            <!--begin::Card title-->
                            <div class="card-title">
                                <partial name="~/Views/PracticeLesson/filterform.cshtml"></partial>
                                <div class="mx-5">
                                    <button type="button" id="" class="btn btn-primary mr-2 eventButton" event="PracticeLessonFormPopup"></button>
                                </div>
                            </div>
                            <!--end::Card title-->
                        </div>
                    </div>

                    <div class="card-body">
                        <!--begin: Search Form-->
                        <!--begin::Search Form-->
                        <div class="mb-10" id="filterForm">
                        </div>
                        <!--end::Search Form-->
                        <!--end: Search Form-->

                        <div id="pager_toplu_secim_div" style="display:none;">
                            <div class="btn-group">
                                <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    İşlem
                                </button>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a class="dropdown-item" id="PagerTopluSil" url="/Test/TopluSil" href="#">
                                            Seçili Kayıtları Sil
                                        </a>
                                        <a class="dropdown-item" id="PagerTopluAktif" url="/Test/TopluAktif" href="#">
                                            Seçili Kayıtları Aktif Yap
                                        </a>
                                        <a class="dropdown-item" id="PagerTopluPasif" url="/Test/TopluPasif" href="#">
                                            Seçili Kayıtları Pasif Yap
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="mt-1 mb-1" id="12">
                        </div>

                        <!--begin: Datatable-->
                        <div class="datatable datatable-bordered datatable-head-custom" id="kt_datatable"></div>
                        <div id="formArea"></div>
                        <!--end: Datatable-->
                    </div>
                </div>
            </div>
            <!--end::Content-->
        </div>

    </div>
</div>

@section Scripts{

    <script src="~/js/pagescripts/PracticeLesson.js"></script>
    <script src="~/js/custom/nav.js"></script>
    <script src="~/js/custom/Form.js"></script>

    <script>
        $(document).ready(function () {
            PracticeLesson.Init();
            Nav.Init();
            Nav.PracticeLessonNav();
            $("#first-item").trigger("click");
        })
    </script>
    <script>
        $(document).ready(function () {
            $('#firstttt').trigger('click');
        });
    </script>

    <script>
        $(document).on('click', '[event="PracticeLessonImageFormPopup"]', function (e) {
            e.preventDefault();
            debugger;
            var params = jQuery.parseJSON($(this).attr("params"));

            $.get("/PracticeLesson/ImageForm/" + params.PracticeLessonId, function (data) {
                Swal.fire({
                    html: data,
                    showCloseButton: true,
                    showConfirmButton: false,
                    customClass: {
                        container: 'swal-container',
                        content: 'swal-content'
                    },
                    width: '50%',
                    padding: '1rem',
                    grow: 'fullscreen',
                    position: 'top'
                });
            });

            $(document).on('click', '.swal-container .swal-close', function () {
                Swal.close();
            });




            $(document).on('submit', '#myForm3', function (e) {
                e.preventDefault();
                debugger;

                var formData = new FormData(this);
                var PracticeLessonId = $('[name="PracticeLessonId"]').val();

                formData.append('PracticeLessonId', PracticeLessonId);

                var fileInput = $('[name="file"]');
                if (fileInput.length > 0 && fileInput[0].files.length > 0) {
                    var file = fileInput[0].files[0];
                    formData.append('file', file);
                }

                $.ajax({
                    url: '/PracticeLesson/Upload',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        Swal.fire({
                            title: "Kayıt Başarılı",
                            text: "Resim başarıyla kaydedildi.",
                            icon: "success"
                        });
                    },
                    error: function (xhr, status, error) {
                        Swal.fire({
                            title: "Hata Oluştu",
                            text: "Resim kaydedilirken bir hata oluştu.",
                            icon: "error"
                        });
                    }
                });
            });


        });
    </script>
}