@model Package

<style>
    .navi {
        padding: 0;
        margin: 0;
        display: block;
        list-style: none;
    }

        .navi .navi-item {
            padding: 0;
            display: block;
            list-style: none;
        }


            .navi .navi-item .navi-link {
                display: -webkit-box;
                display: -ms-flexbox;
                display: flex;
                -webkit-box-align: center;
                -ms-flex-align: center;
                align-items: center;
                padding: 0.75rem 1.5rem;
            }

        .navi.navi-link-rounded .navi-item .navi-link {
            border-radius: 0.42rem;
            color: #c5c5d8;
        }

        .navi.navi-active .navi-item .navi-link.active {
            background-color: #009ef7;
        }

        .navi.navi .navi-item .navi-link {
            background-color: #F3F6F9;
        }

        .navi .navi-item .navi-link .navi-icon {
            -webkit-box-flex: 0;
            -ms-flex: 0 0 2rem;
            flex: 0 0 2rem;
        }
</style>
<div class="subheader py-2 py-lg-6 subheader-solid" id="kt_subheader" style="background-color:white;">
    <div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
        <!--begin::Info-->
        <div class="d-flex align-items-center flex-wrap mr-1">
            <!--begin::Mobile Toggle-->
            <button class="burger-icon burger-icon-left mr-4 d-inline-block d-lg-none" id="kt_subheader_mobile_toggle">
                <span></span>
            </button>
            <!--end::Mobile Toggle-->
            <!--begin::Page Heading-->
            <div class="d-flex align-items-baseline flex-wrap mx-10">
                <!--begin::Page Title-->
                <h5 class="text-dark font-weight-bold my-1 mx-10">@Model.Name  </h5>
                <!--end::Page Title-->
                <!--begin::Breadcrumb-->
                <ul class="breadcrumb breadcrumb-transparent breadcrumb-dot font-weight-bold p-0 my-2 font-size-sm">

                    <li class="breadcrumb-item">
                        <a  class="text-muted">Paketler</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a  class="text-muted">Detay</a>
                    </li>

                </ul>
                <!--end::Breadcrumb-->
            </div>
            <!--end::Page Heading-->
        </div>
        <!--end::Info-->

    </div>
</div>

<div class="m-10">


    <div class="row">

        <div class="col-sm-2 card align-items-center">

            <div class=" p-1 card-body menu menu-rounded menu-column menu-title-gray-700 menu-icon-gray-400 menu-arrow-gray-400 menu-bullet-gray-400 menu-arrow-gray-400 menu-state-bg fw-semibold w-200px" data-kt-menu="true">
                <h5 class="text-dark font-weight-bold my-5">@Model.Name  </h5>

                <!--begin::Nav-->
                <div class="navi navi-bold navi-hover navi-active navi-link-rounded" id="navi">
                    <input type="hidden" id="PackageId" value="@Model.PackageId" />
                    <div class="navi-item mb-2 mt-2">
                        <a href="#"
                           id="@Model.PackageId"
                           displayType="list"
                           form="/Package/GetPackage/@Model.PackageId"
                           filterForm=""
                           triggerEvent="SaveThisPackage"
                           params='{"id":"@Model.PackageId"}'
                           triggerText="Kaydet"
                           btnId="0"
                           coloumns="Paket"
                           cardLTitle="@Model.Name Detay"
                           cardDescription="Paket Detayları"
                           class="navi-link py-4">

                            <span class="navi-icon mr-2">
                                <span class="svg-icon">
                                    <i class="fa-solid fa-graduation-cap"></i>
                                </span>
                            </span>
                            <span class="navi-text font-size-lg">Paket</span>
                        </a>
                    </div>
                </div>
                <div class="navi navi-bold navi-hover navi-active navi-link-rounded" id="navi">
                    <input type="hidden" id="PackageId" value="@Model.PackageId" />
                    <div class="navi-item mb-2 mt-2">
                        <a href="#"
                           id="@Model.PackageId"
                           displayType="list"
                           form="/Package/GetAdvisor/@Model.PackageId"
                           filterForm=""
                           triggerEvent="AdvisorFormPopup"
                           params='{"id":"0","relationId":"@Model.PackageId"}'
                           triggerText="Danışmanlık Ekle"
                           btnId="0"
                           coloumns="Ders"
                           cardLTitle="@Model.Name Detay"
                           cardDescription="Paket Danışmanlıkları"
                           class="navi-link py-4">

                            <span class="navi-icon mr-2">
                                <span class="svg-icon">
                                    <i class="fa-sharp fa-solid fa-paste"></i>
                                </span>
                            </span>
                            <span class="navi-text font-size-lg">Danışmanlık Ve Hizmetler</span>
                        </a>
                    </div>
                </div>
                <div class="navi navi-bold navi-hover navi-active navi-link-rounded" id="navi">
                    <input type="hidden" id="PackageId" value="@Model.PackageId" />
                   
                    <div class="navi-item mb-2 mt-2">
                        <a href="#"
                           id="@Model.PackageId"
                           PackageId="@Model.PackageId"
                           displayType="list"
                           form="/Package/GetPracticeLesson/@Model.PackageId"
                           filterForm=""
                           triggerEvent="PracticeLessonFormPopup"
                           params='{"id":"0","relationId":"@Model.PackageId"}'
                           triggerText="Pratik Ders Ekle"
                           btnId="0"
                           coloumns="Pratik Dersler"
                           cardLTitle="@Model.Name Detay"
                           cardDescription="Paket Pratik Dersleri"
                           class="navi-link py-4">

                            <span class="navi-icon mr-2">
                                <span class="svg-icon">
                                    <i class="fa-solid fa-atom"></i>
                                </span>
                            </span>
                            <span class="navi-text font-size-lg">Pratik Dersler</span>
                        </a>
                    </div>
                </div>
                <div class="navi navi-bold navi-hover navi-active navi-link-rounded" id="navi">
                    <input type="hidden" id="PackageId" value="@Model.PackageId" />
                    <div class="navi-item mb-2 mt-2">
                        <a href="#"
                           id="@Model.PackageId"
                           displayType="list"
                           form="/Package/GetCourse/@Model.PackageId"
                           filterForm=""
                           triggerEvent="CourseFormPopup"
                           params='{"id":"0","relationId":"@Model.PackageId"}'
                           triggerText="Kurs Ekle"
                           btnId="0"
                           coloumns="Kurslar"
                           cardLTitle="@Model.Name Detay"
                           cardDescription="Kurslar"
                           class="navi-link py-4">

                            <span class="navi-icon mr-2">
                                <span class="svg-icon">
                                    <i class="fa-sharp fa-solid fa-bolt"></i>
                                </span>
                            </span>
                            <span class="navi-text font-size-lg">Kurslar</span>
                        </a>
                    </div>
                </div>
                <!--end::Nav-->



            </div>
        </div>

        <div class="col-sm-10 ">
            <!--begin::Content-->
            <div class="flex-row-fluid ml-lg-8">
                <div class="card card-custom card-stretch">
                    <!--begin::Header-->
                    <div class="card-header py-3">
                        <div class="card-title align-items-start flex-column">
                            <h3 id="cardTitle" class="card-label font-weight-bolder text-dark"></h3>
                            <span id="cardDescription" class="text-muted font-weight-bold font-size-sm mt-1"></span>
                        </div>
                        <div class="card-toolbar">
                            <!--begin::Card title-->
                            <div class="card-title">
                                <partial name="~/Views/Package/filterform.cshtml"></partial>
                                <div class="mx-5">
                                    <button type="button" id="" class="btn btn-primary mr-2 eventButton" event="PackageFormPopup"></button>
                                </div>
                            </div>
                            <!--end::Card title-->
                        </div>
                    </div>

                    <div class="card-body">
                        <!--begin: Search Form-->
                        <!--begin::Search Form-->
                        <div class="mb-10" id="filterForm">
                        </div>
                        <!--end::Search Form-->
                        <!--end: Search Form-->

                        <div id="pager_toplu_secim_div" style="display:none;">
                            <div class="btn-group">
                                <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    İşlem
                                </button>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a class="dropdown-item" id="PagerTopluSil" url="/Test/TopluSil" href="#">
                                            Seçili Kayıtları Sil
                                        </a>
                                        <a class="dropdown-item" id="PagerTopluAktif" url="/Test/TopluAktif" href="#">
                                            Seçili Kayıtları Aktif Yap
                                        </a>
                                        <a class="dropdown-item" id="PagerTopluPasif" url="/Test/TopluPasif" href="#">
                                            Seçili Kayıtları Pasif Yap
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="mt-1 mb-1" id="12">
                        </div>

                        <!--begin: Datatable-->
                        <div class="datatable datatable-bordered datatable-head-custom" id="kt_datatable"></div>
                        <div id="formArea"></div>
                        <!--end: Datatable-->
                    </div>
                </div>
            </div>
            <!--end::Content-->
        </div>

    </div>
</div>

@section Scripts{

    <script src="~/js/pagescripts/Package.js"></script>
    <script src="~/js/custom/nav.js"></script>
    <script src="~/js/custom/Form.js"></script>

    <script src="~/js/pagescripts/Course.js"></script>
    <script src="~/js/pagescripts/Advisor.js"></script>
    <script src="~/js/pagescripts/PracticeLesson.js"></script>
    <script>
        $(document).ready(function () {
            Package.Init();
            Course.Init();
            Advisor.Init();
            PracticeLesson.Init();
            Nav.Init();
            Nav.PackageNav();
            $("#first-item").trigger("click");
        })
    </script>
    <script>
        $(document).ready(function () {
            $('#@Model.PackageId').trigger('click');
        });
    </script>
    <script>
        $(document).ready(function () {
            $('.selectpicker').select2();
        });
    </script>

    <script>
        $(document).ready(function () {
            $(document).on('change', '#startdate .startDateInput', function () {
                var packageCourseRelationId = $(this).closest('form').find('.packageCourseRelationId').val();
                var packageId = $(this).closest('form').find('.packageId').val();
                var courseId = $(this).closest('form').find('.courseId').val();
                var finishDate = $(this).closest('form').find('.finishDate').val();
                var startDate = $(this).val();

                $.ajax({
                    url: '/Package/UpdateStartdate',
                    type: 'POST',
                    data: {
                        packageCourseRelationId: packageCourseRelationId,
                        packageId: packageId,
                        courseId: courseId,
                        finishDate: finishDate,
                        startDate: startDate
                    },
                    success: function (response) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Başarılı',
                            text: 'Kaydedildi.'
                        });
                    },
                    error: function (xhr, status, error) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Hata',
                            text: 'İşlem sırasında bir hata oluştu.'
                        });
                    }
                });
            });

            $(document).on('change', '#finishdate .finishDateInput', function () {
                var packageCourseRelationId = $(this).closest('form').find('.packageCourseRelationId').val();
                var packageId = $(this).closest('form').find('.packageId').val();
                var courseId = $(this).closest('form').find('.courseId').val();
                var startDate = $(this).closest('form').find('.startDate').val();
                var finishDate = $(this).val();

                $.ajax({
                    url: '/Package/UpdateStartdate',
                    type: 'POST',
                    data: {
                        packageCourseRelationId: packageCourseRelationId,
                        packageId: packageId,
                        courseId: courseId,
                        startDate: startDate,
                        finishDate: finishDate
                    },
                    success: function (response) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Başarılı',
                            text: 'Kaydedildi.'
                        });
                    },
                    error: function (xhr, status, error) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Hata',
                            text: 'İşlem sırasında bir hata oluştu.'
                        });
                    }
                });
            });
        });


    </script>
}